# üìã Tickets de Funcionalidades Pendentes - Demoday

## üéØ Baseado na An√°lise do Cliente (Transcri√ß√£o)

O cliente definiu requisitos espec√≠ficos que precisam ser implementados:

### üìä Fluxo Completo do Cliente:
1. **Per√≠odo de Inscri√ß√£o** (10 dias) - estudantes submetem projetos
2. **Avalia√ß√£o Geral** - professores e alunos avaliam todos os projetos
3. **Sele√ß√£o de Finalistas** - 3-5 projetos por categoria (baseado na vota√ß√£o popular)
4. **Vota√ß√£o Final** - no dia do evento (professores t√™m voto decisivo)
5. **Certificados** - apenas para quem participou de todas as etapas

---

## üö® **CR√çTICO - Funcionalidades Solicitadas pelo Cliente**

### TICKET-021: Tela de Gest√£o de Resultados Admin ‚≠ê **NOVO - IMPLEMENTADO**
**Descri√ß√£o**: Tela administrativa completa para visualizar todos os projetos com dados detalhados, marcar vencedores e exportar dados.
**Contexto Cliente**: "n√£o conseguimos ver nem qual o projeto que foi o vencedor. al√©m disso, era pra ter uma tela para visualizar todos eles, os votos, as notas etc."
**Status Atual**: ‚úÖ Implementado
**Tarefas**:
- [X] Criar p√°gina `/dashboard/admin/results` para listar demodays
- [X] Criar p√°gina `/dashboard/admin/results/[demodayId]` para gest√£o detalhada
- [X] API `/api/admin/demoday/[id]/detailed-results` com dados completos
- [X] API `/api/admin/project-submissions/[id]/status` para atualizar status
- [X] API `/api/admin/demoday/[id]/export` para exportar dados CSV
- [X] Interface para visualizar todos os projetos com:
  - Votos populares e finais
  - Avalia√ß√µes e notas m√©dias
  - Status atual (submitted/approved/finalist/winner)
  - Funcionalidade para marcar/desmarcar vencedores
- [X] Filtros por categoria e status
- [X] Busca por t√≠tulo/autor
- [X] Export completo para CSV
- [X] Estat√≠sticas gerais do demoday
- [X] Link no sidebar admin

**Prioridade**: üî• **CR√çTICA - CONCLU√çDA**

### TICKET-015: Sistema de Categorias para Projetos ‚≠ê **NOVO**
**Descri√ß√£o**: Implementar sistema de categorias customiz√°veis para organizar projetos.
**Contexto Cliente**: "dos cinco que v√£o para a final, dos cinco finalistas... de cada categoria que a gente vai criar, a gente vai selecionar tr√™s ou cinco"
**Status Atual**: ‚úÖ Parcialmente Implementado
**Tarefas**:
- [X] Adicionar tabela `project_categories` no schema
- [X] Modificar tabela `projects` para incluir `categoryId`
- [X] Criar API para CRUD de categorias
- [X] Interface admin para gerenciar categorias
- [X] Filtros por categoria nas listagens
- [X] Valida√ß√£o: m√°ximo de finalistas por categoria (API `demoday/[id]/finalists` considera `max_finalists`)

**Prioridade**: üî• **CR√çTICA**

### TICKET-016: Sistema de Vota√ß√£o Diferenciada ‚≠ê **NOVO**
**Descri√ß√£o**: Implementar distin√ß√£o entre votos de estudantes e professores com pesos diferentes.
**Contexto Cliente**: "o professor √© quem vai dar o voto final... o professor vai decidir manualmente ali no final"
**Status Atual**: ‚úÖ Implementado
**Tarefas**:
- [X] Modificar tabela `votes` para incluir `voterRole` e `voteWeight`
- [X] Criar tabela `vote_phases` (popular vs final) -> (coluna `votePhase` na tabela `votes`)
- [X] API para vota√ß√£o popular (fase preliminar)
- [X] API para vota√ß√£o final (apenas professores) (API atual j√° diferencia e aplica pesos)
- [X] Interface diferenciada para cada tipo de vota√ß√£o (P√°gina de vota√ß√£o p√∫blica adapta-se √† fase e role)
- [X] C√°lculo de resultados com pesos diferentes (Realizado na API de Resultados `/api/demoday/[id]/results`)

**Prioridade**: üî• **CR√çTICA**

### TICKET-017: Gera√ß√£o de Certificados ‚≠ê **NOVO**
**Descri√ß√£o**: Sistema autom√°tico de gera√ß√£o de certificados para participantes.
**Contexto Cliente**: "O sistema, a gera√ß√£o de certificados s√≥ vai ocorrer para quem teve no sistema, para quem avaliou na etapa preliminar e participou no dia presencial"
**Status Atual**: ‚ùå Inexistente
**Tarefas**:
- [X] Criar tabela `certificates` para rastrear certificados gerados
- [X] Adicionar campo `attendedEvent` na tabela users (`users.attended_current_event`, `certificates.attended_event`)
- [ ] Template de certificado em PDF
- [X] API `/api/certificates/generate` (Estrutura inicial criada, com MOCK para eligibility e PDF URL)
- [ ] Valida√ß√£o: participou da avalia√ß√£o + presen√ßa no evento (Placeholders na API, necessita l√≥gica real)
- [ ] Download de certificados na √°rea do usu√°rio
- [ ] Envio por email automaticamente

**Prioridade**: üî• **CR√çTICA**

### TICKET-018: Sele√ß√£o Autom√°tica de Finalistas ‚≠ê **NOVO**
**Descri√ß√£o**: Sistema para selecionar automaticamente finalistas baseado na vota√ß√£o popular.
**Contexto Cliente**: "desses 50, de cada categoria... a gente vai selecionar tr√™s ou cinco... baseado na vota√ß√£o popular"
**Status Atual**: ‚úÖ Parcialmente Implementado
**Tarefas**:
- [X] Configura√ß√£o de n√∫mero de finalistas por categoria
- [X] API para calcular e marcar finalistas automaticamente
- [X] Interface para admin revisar sele√ß√£o autom√°tica (Bot√£o para acionar na p√°gina de detalhes do Demoday Admin)
- [ ] Notifica√ß√µes para finalistas selecionados
- [ ] Relat√≥rio de justificativa da sele√ß√£o

**Prioridade**: üî• **CR√çTICA**

### TICKET-019: Formul√°rio de Feedback/Usabilidade ‚≠ê **NOVO**
**Descri√ß√£o**: Coletar feedback dos participantes sobre usabilidade do sistema.
**Contexto Cliente**: "a gente j√° manda o link para o cara responder um formul√°rio de perguntas sobre usabilidade do sistema"
**Status Atual**: ‚ùå Inexistente
**Tarefas**:
- [ ] Criar tabela `user_feedback`
- [ ] Formul√°rio de avalia√ß√£o da plataforma
- [ ] API para salvar feedback
- [ ] Envio autom√°tico de link por email ap√≥s evento
- [ ] Dashboard admin para visualizar feedback
- [ ] Export de dados para an√°lise (TCC)

**Prioridade**: üî• **CR√çTICA**

---

## üö® Alta Prioridade (Funcionalidades Cr√≠ticas)

### TICKET-001: Implementar Backend de Verifica√ß√£o de Email
**Descri√ß√£o**: Criar endpoint para processar links de verifica√ß√£o de email enviados aos usu√°rios.
**Contexto**: Atualmente existe a p√°gina `/verify-email` mas falta o endpoint backend para processar o token de verifica√ß√£o.
**Tarefas**:
- [ ] Criar endpoint `GET /api/auth/verify-email?token=xxx`
- [ ] Validar token e marcar email como verificado
- [ ] Redirecionar para p√°gina de sucesso
- [ ] Implementar expira√ß√£o de tokens

### TICKET-002: Implementar Backend de Reset de Senha
**Descri√ß√£o**: Criar fluxo completo de recupera√ß√£o de senha.
**Contexto**: As p√°ginas de forgot-password e reset-password existem, mas faltam os endpoints.
**Tarefas**:
- [ ] Criar endpoint `POST /api/auth/forgot-password` para solicitar reset
- [ ] Criar endpoint `POST /api/auth/reset-password` para processar novo password
- [ ] Implementar envio de email com link de reset
- [ ] Adicionar valida√ß√£o de token e expira√ß√£o

### TICKET-003: Criar P√°gina de Vota√ß√£o P√∫blica
**Descri√ß√£o**: Desenvolver interface p√∫blica para vota√ß√£o nos projetos durante fase espec√≠fica.
**Contexto**: A API de vota√ß√£o existe (`/api/projects/vote`), mas falta a interface p√∫blica.
**‚ö†Ô∏è ATEN√á√ÉO**: Precisa ser adaptada para o novo sistema de vota√ß√£o diferenciada
**Status Atual**: ‚úÖ Parcialmente Implementado
**Tarefas**:
- [X] Criar p√°gina `/demoday/[id]/voting` acess√≠vel ao p√∫blico
- [X] Exibir projetos aprovados por categoria (com filtro de categoria)
- [X] Implementar sistema de vota√ß√£o popular (Frontend com bot√£o de voto e l√≥gica b√°sica)
- [X] Validar se est√° na fase correta de vota√ß√£o (Interface exibe status e API valida)
- [X] Limitar um voto por usu√°rio/sess√£o (API valida, UI mostra status "Voted")

### TICKET-004: Criar P√°gina de Resultados
**Descri√ß√£o**: Desenvolver p√°gina p√∫blica para exibi√ß√£o dos resultados finais.
**Contexto**: N√£o existe p√°gina para mostrar vencedores e finalistas ap√≥s o t√©rmino do Demoday.
**‚ö†Ô∏è ATEN√á√ÉO**: Precisa mostrar resultados por categoria e tipo de vota√ß√£o
**Status Atual**: ‚úÖ Implementado
**Tarefas**:
- [X] Criar p√°gina `/demoday/[id]/results`
- [X] Exibir projetos por categoria (vencedores, finalistas, participantes)
- [X] Separar resultados de vota√ß√£o popular vs professores (API calcula `popularVoteCount` e `finalWeightedScore`)
- [X] Mostrar estat√≠sticas de participa√ß√£o (Pendente - API n√£o retorna isso ainda) -> (API retorna `overallStats` com `totalSubmittedProjects`, `totalUniqueParticipants`, `totalPopularVotes`, `totalFinalVotes`)
- [ ] Incluir avalia√ß√µes agregadas (Pendente - API n√£o retorna isso ainda)

---

## üîß M√©dia Prioridade (Melhorias Importantes)

### TICKET-020: Melhorar Dashboard Admin com Novas Funcionalidades ‚≠ê **ATUALIZADO**
**Descri√ß√£o**: Adicionar funcionalidades espec√≠ficas solicitadas pelo cliente.
**Contexto**: Sidebar atual n√£o contempla todas as necessidades do admin.
**Status Atual**: ‚ö†Ô∏è Parcialmente implementado
**Tarefas**:
- [ ] Adicionar link "Categorias" no menu admin
- [ ] P√°gina de gest√£o de categorias
- [ ] Dashboard de finalistas por categoria
- [ ] √Årea de configura√ß√£o de certificados
- [ ] Relat√≥rios de feedback dos usu√°rios

### TICKET-005: Sistema de Notifica√ß√µes por Email
**Descri√ß√£o**: Implementar notifica√ß√µes autom√°ticas para eventos importantes.
**Contexto**: O emailService existe mas n√£o est√° sendo usado para notifica√ß√µes autom√°ticas.
**‚ö†Ô∏è ATEN√á√ÉO**: Incluir notifica√ß√µes espec√≠ficas do cliente
**Tarefas**:
- [ ] Email de boas-vindas ap√≥s registro
- [ ] Notifica√ß√£o quando projeto √© aprovado/rejeitado
- [ ] Alerta de mudan√ßa de fase do Demoday
- [ ] Notifica√ß√£o para finalistas selecionados
- [ ] Email de resultado final para participantes
- [ ] Link para formul√°rio de feedback p√≥s-evento
- [ ] Notifica√ß√£o de certificado dispon√≠vel

### TICKET-006: Valida√ß√£o Autom√°tica de Fases
**Descri√ß√£o**: Implementar sistema para transi√ß√£o autom√°tica de fases baseada em datas.
**Contexto**: Atualmente as fases t√™m datas mas n√£o h√° valida√ß√£o autom√°tica.
**‚ö†Ô∏è ATEN√á√ÉO**: Cliente mencionou datas espec√≠ficas (setembro 2025)
**Tarefas**:
- [ ] Criar job/cron para verificar datas das fases
- [ ] Bloquear a√ß√µes fora da fase correta
- [ ] Transi√ß√£o autom√°tica: inscri√ß√£o ‚Üí avalia√ß√£o ‚Üí sele√ß√£o ‚Üí evento
- [ ] Implementar warnings quando fase est√° pr√≥xima do fim
- [ ] Adicionar override manual para admin

### TICKET-007: Dashboard de Analytics
**Descri√ß√£o**: Criar dashboard com estat√≠sticas e m√©tricas do Demoday.
**Contexto**: Admins precisam visualizar m√©tricas gerais do evento.
**‚ö†Ô∏è ATEN√á√ÉO**: Incluir m√©tricas espec√≠ficas solicitadas
**Tarefas**:
- [ ] Criar endpoint `/api/analytics/demoday/[id]`
- [ ] P√°gina `/dashboard/admin/analytics`
- [ ] M√©tricas: total de projetos por categoria
- [ ] Estat√≠sticas de vota√ß√£o (popular vs professores)
- [ ] Participa√ß√£o nas avalia√ß√µes
- [ ] Presen√ßa no evento (para certificados)
- [ ] Gr√°ficos de engajamento

### TICKET-008: Funcionalidade de Export
**Descri√ß√£o**: Permitir exporta√ß√£o de dados em diferentes formatos.
**Contexto**: Necess√°rio para relat√≥rios e an√°lises externas.
**‚ö†Ô∏è ATEN√á√ÉO**: Cliente mencionou uso para TCC
**Tarefas**:
- [ ] Export de projetos por categoria (CSV/Excel)
- [ ] Export de resultados de vota√ß√£o separados
- [ ] Export de feedback de usabilidade
- [ ] Relat√≥rio PDF do Demoday completo
- [ ] Lista de participantes eleg√≠veis para certificado

---

## üìà Baixa Prioridade (Nice to Have)

### TICKET-009: Sistema de Busca e Filtros
**Descri√ß√£o**: Implementar busca avan√ßada e filtros para projetos.
**Contexto**: Facilitar navega√ß√£o quando houver muitos projetos.
**‚ö†Ô∏è ATEN√á√ÉO**: Incluir filtros por categoria
**Tarefas**:
- [ ] Busca por t√≠tulo/descri√ß√£o
- [ ] Filtros por tipo de projeto
- [ ] Filtros por categoria (nova funcionalidade)
- [ ] Filtros por status (submitted, finalist, winner)
- [ ] Ordena√ß√£o por votos/avalia√ß√£o

### TICKET-010: Rate Limiting e Seguran√ßa
**Descri√ß√£o**: Implementar prote√ß√µes adicionais de seguran√ßa.
**Contexto**: Prevenir abuso de APIs e ataques.
**Tarefas**:
- [ ] Rate limiting em endpoints de vota√ß√£o
- [ ] Prote√ß√£o contra m√∫ltiplos votos
- [ ] CORS configurado para endpoints p√∫blicos
- [ ] Logs de auditoria para a√ß√µes administrativas
- [ ] Backup autom√°tico antes do evento

### TICKET-011: Opera√ß√µes em Lote
**Descri√ß√£o**: Permitir a√ß√µes em m√∫ltiplos itens simultaneamente.
**Contexto**: Facilitar trabalho do admin com muitos projetos.
**Tarefas**:
- [ ] Aprovar/rejeitar m√∫ltiplos projetos
- [ ] Marcar m√∫ltiplos como finalistas
- [ ] Gerar certificados em lote
- [ ] Enviar notifica√ß√µes em lote

### TICKET-012: Galeria P√∫blica de Projetos
**Descri√ß√£o**: Criar p√°gina p√∫blica para visualizar todos os projetos de Demodays anteriores.
**Contexto**: Showcase permanente dos projetos desenvolvidos.
**‚ö†Ô∏è ATEN√á√ÉO**: Organizar por categoria
**Tarefas**:
- [ ] P√°gina `/gallery` ou `/projects/archive`
- [ ] Filtros por ano/demoday/categoria
- [ ] P√°gina de detalhes do projeto p√∫blico

---

## üóÑÔ∏è Atualiza√ß√µes de Schema Necess√°rias

### Baseado nos Requisitos do Cliente:

```sql
-- Nova tabela para categorias
CREATE TABLE project_categories (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT,
  max_finalists INTEGER DEFAULT 5,
  demoday_id TEXT REFERENCES demodays(id),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Adicionar categoria aos projetos
ALTER TABLE projects ADD COLUMN category_id TEXT REFERENCES project_categories(id);

-- Melhorar sistema de vota√ß√£o
ALTER TABLE votes ADD COLUMN voter_role TEXT NOT NULL DEFAULT 'user';
ALTER TABLE votes ADD COLUMN vote_phase TEXT NOT NULL DEFAULT 'popular'; -- 'popular' ou 'final'
ALTER TABLE votes ADD COLUMN weight INTEGER DEFAULT 1;

-- Certificados
CREATE TABLE certificates (
  id TEXT PRIMARY KEY,
  user_id TEXT REFERENCES users(id),
  demoday_id TEXT REFERENCES demodays(id),
  participated_evaluation BOOLEAN DEFAULT FALSE,
  attended_event BOOLEAN DEFAULT FALSE,
  generated_at TIMESTAMP,
  pdf_url TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Feedback de usabilidade
CREATE TABLE user_feedback (
  id TEXT PRIMARY KEY,
  user_id TEXT REFERENCES users(id),
  demoday_id TEXT REFERENCES demodays(id),
  usability_rating INTEGER CHECK (usability_rating >= 1 AND usability_rating <= 5),
  comments TEXT,
  suggestions TEXT,
  would_participate_again BOOLEAN,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Presen√ßa no evento
ALTER TABLE users ADD COLUMN attended_current_event BOOLEAN DEFAULT FALSE;
```

---

## üìä **Prioriza√ß√£o FINAL baseada no Cliente**

### üî• **IMPLEMENTAR IMEDIATAMENTE (MVP do Cliente)**:
1. **Sistema de Categorias** (TICKET-015)
2. **Vota√ß√£o Diferenciada** (TICKET-016) 
3. **Sele√ß√£o de Finalistas** (TICKET-018)
4. **P√°gina de Vota√ß√£o P√∫blica atualizada** (TICKET-003)
5. **P√°gina de Resultados por categoria** (TICKET-004)

### ‚ö° **PR√ìXIMA SPRINT**:
6. **Gera√ß√£o de Certificados** (TICKET-017)
7. **Formul√°rio de Feedback** (TICKET-019)
8. **Sistema de Notifica√ß√µes** (TICKET-005)
9. **Verifica√ß√£o/Reset de Email** (TICKET-001, TICKET-002)

### üöÄ **FUTURAS MELHORIAS**:
10. **Dashboard Analytics atualizado** (TICKET-007)
11. **Valida√ß√£o de Fases** (TICKET-006)
12. **Exports atualizados** (TICKET-008)

---

## üéØ **Situa√ß√£o Atual vs Requisitos do Cliente**

### ‚úÖ **J√Å IMPLEMENTADO**:
- Sistema b√°sico de projetos com tipos
- Avalia√ß√£o por professores com crit√©rios
- Sistema b√°sico de vota√ß√£o
- Dashboard administrativo b√°sico
- Autentica√ß√£o e roles

### ‚ùå **FALTA IMPLEMENTAR (CR√çTICO)**:
- Categorias customiz√°veis para projetos
- Distin√ß√£o entre vota√ß√£o popular e vota√ß√£o final
- Sele√ß√£o autom√°tica de finalistas por categoria
- Gera√ß√£o de certificados
- Formul√°rio de feedback de usabilidade

### ‚ö†Ô∏è **PRECISA ATUALIZAR**:
- Sidebar do dashboard (incluir categorias)
- APIs de vota√ß√£o (diferencia√ß√£o de roles)
- P√°gina de resultados (por categoria)
- Sistema de notifica√ß√µes (novos eventos)

---

## üí° **Observa√ß√µes Importantes do Cliente**

1. **Evento em Setembro 2025**: Cliente mencionou que precisa de datas exatas para reservar audit√≥rio
2. **Per√≠odo de Trabalhos**: 2024 at√© setembro 2025
3. **Certificados s√£o Cr√≠ticos**: Serve para carga hor√°ria complementar dos estudantes
4. **Imparcialidade**: Professor tem palavra final para evitar "voto de amizade"
5. **Feedback para TCC**: Dados de usabilidade ser√£o usados em trabalho acad√™mico
6. **Categoriza√ß√£o √© Essencial**: Cliente enfatizou "de cada categoria" m√∫ltiplas vezes

### üéØ **Defini√ß√£o de "Pronto" (Atualizada)**

Para cada ticket considerar:
- [ ] Funcionalidade implementada e testada
- [ ] Tratamento de erros adequado  
- [ ] Loading states implementados
- [ ] Responsivo (mobile/desktop)
- [ ] **Documenta√ß√£o atualizada**
- [ ] Tipos TypeScript corretos
- [ ] **Atende especificamente ao requisito do cliente**
- [ ] **Testado com cen√°rio de uso real (50 projetos, m√∫ltiplas categorias)**